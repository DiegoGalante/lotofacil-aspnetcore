_bgcolorGray="bg-gray",_bgcolorInfo11_12="bg-info",_bgcolorWarning13="bg-warning",_bgcolorSuccess14="bg-success",_bgcolorDanger15="bg-danger",_colorGray="#ced4da",_colorInfo11_12="#17a2b8",_colorWarning13="#ffc107",_colorSuccess14="#28a745",_colorDanger15="#dc3545",_objPrincipal={};var _lotoChart=null;$(document).ready(function(){carregaPagina(),$("#concurseSearch").click(function(){carregaPagina($("#txtConcurse").val())}),$("#btn-checkOnline").click(function(){divCarregando(!0),num_concurse=0;try{num_concurse=parseInt($("#txtConcurse").val())}catch(a){num_concurse=0}checkOnline(num_concurse)}),$("#btn-email").click(function(){null!=_objPrincipal&&null!=_objPrincipal.configuration&&0<_objPrincipal.configuration.person&&(divCarregando(!0),sendEmail())}),$(":input").keyup(function(a){13==a.which&&carregaPagina($("#txtConcurse").val())}),$("[data-toggle=\"popover\"]").popover()}),Number.prototype.toFixedDown=function(a){var b=this-Math.pow(10,-a)/2;return b+=b/Math.pow(2,53),b.toFixed(a)};function calcPorcentagem(a){return 100*a/15}function carregaPagina(a=0){$("#gamePerson").text(""),$.ajax({type:"POST",contentType:"application/json",async:!0,url:0===parseInt(a)?"/load":"/load/"+parseInt(a),success:function(b){_objPrincipal=b,parseInt(a)?$("#txtConcurse").val(b.concurse.concurse):$("#txtConcurse").val(""),$("#concurseHeader").text("Concurso "+b.concurse.concurse+" - "+b.concurse.dtConcurse),$("#concurseHeader").attr("title",b.concurse.dtExtense),atualizaPontos(15,b.concurse.hit15,b.concurse.shared15,b.concurse.percent15),atualizaPontos(14,b.concurse.hit14,b.concurse.shared14,b.concurse.percent14),atualizaPontos(13,b.concurse.hit13,b.concurse.shared13,b.concurse.percent13),atualizaPontos(12,b.concurse.hit12,b.concurse.shared12,b.concurse.percent12),atualizaPontos(11,b.concurse.hit11,b.concurse.shared11,b.concurse.percent11),montaGrafico(b.concurse.game,[]),loadGames()},error:function(b){console.log(b)}})}function checkOnline(a=0){$.ajax({type:"POST",contentType:"application/json",async:!0,url:"/checkOnline/"+a,data:JSON.stringify(_objPrincipal),success:function(b){divCarregando(!1),b.return&&carregaPagina()},error:function(b){divCarregando(!1),console.log(b)}})}function loadGames(){divListaJogosCarregando(!0),$.ajax({type:"POST",contentType:"application/json",async:!0,url:"/loadGames",data:JSON.stringify(_objPrincipal),success:function(a){divListaJogosCarregando(!1),a.return,a.personGame.length==void 0&&(a.personGame=[]),_objPrincipal.personGame=a.personGame,_objPrincipal.concurse.amount_tickets=a.amount_tickets,$("#amount_ticket").prop("style","font-size: 25px;"),0<_objPrincipal.concurse.amount_tickets?($("#amount_ticket").addClass("text-success"),$("#amount_ticket").text("R$ "+formatNumber(_objPrincipal.concurse.amount_tickets)+" "),$("#amount_ticket").append("<i class='fa fa-thumbs-o-up' title='Parab\xE9ns ;)'></i>")):($("#amount_ticket").removeClass("text-success"),$("#amount_ticket").text("R$ "+formatNumber(_objPrincipal.concurse.amount_tickets))),listaJogos(_objPrincipal.personGame),montaGrafico(_objPrincipal.concurse.game,_objPrincipal.personGame)},error:function(a){divListaJogosCarregando(!1),console.log(a)}})}function sendEmail(){$.ajax({type:"POST",contentType:"application/json",async:!0,url:"/sendEmail",data:JSON.stringify(_objPrincipal),success:function(a){if(divCarregando(!1),a.return){var b=$("#divEmail"),c=$("#btn-email");c.addClass("hide"),b.fadeIn(1e3),b.val(a.msg),b.removeClass("hide"),setInterval(function(){b.hide(1250,function(){b.addClass("hide"),b.get(0).style.display=""})},3100)}else console.log(a.msg)},error:function(a){divCarregando(!1),console.log(a)}})}function divCarregando(a=!1){a?$("#divCarregando").removeClass("hide"):$("#divCarregando").addClass("hide")}function divListaJogosCarregando(a=!1){a?$("#divCarregandoJogos").removeClass("hide"):$("#divCarregandoJogos").addClass("hide")}function listaJogos(a){if($("#gamePerson").text(""),$("#pontuationStats").removeClass("hide"),0==a.length)$("#hasGame").addClass("hide"),$("#noGame").removeClass("hide");else{for(_colorGame="",html="",divGroup="<div class='progress-group'>",fechaDiv="</div>",divProgress="<div class='progress progress-sm active'>",i=0;i<a.length;i++){switch(html="",a[i].hits){case 15:_colorGame=_bgcolorDanger15;break;case 14:_colorGame=_bgcolorSuccess14;break;case 13:_colorGame=_bgcolorWarning13;break;case 12:case 11:_colorGame=_bgcolorInfo11_12;break;default:_colorGame=_bgcolorGray;}html+=divGroup,popoverGroup=10<a[i].hits?"<a href='#' title='Autor' data-toggle='popover' data-trigger='hover' data-placement='left' data-content='"+a[i].name+" - R$ "+formatNumber(a[i].amount)+"'>Jogo  #"+a[i].id+"</a> - <strong>"+a[i].hits+"</strong> dezenas sorteadas!":"<a title='Autor' data-toggle='popover' data-trigger='hover' data-placement='left' data-content='"+a[i].name+"'>Jogo  #"+a[i].id+"</a> - "+a[i].hits+" dezenas sorteadas!",html+=popoverGroup,spanGroup="<span class='float-right'><b><span class='badge "+_colorGame+"'>"+a[i].hits+"</span></b> / <span class='badge bg-danger'>15</span></span>",html+=spanGroup,html+=divProgress,progressBar="<div class='progress-bar "+_colorGame+" progress-bar-striped' role='progressbar' aria-valuenow='11' aria-valuemin='0' aria-valuemax='15' title='"+calcPorcentagem(a[i].hits)+"% de acerto!'  style='width: "+calcPorcentagem(a[i].hits)+"%;' id='progressBar"+a[i].id+"'>",html+=progressBar,html+=fechaDiv,html+=fechaDiv,html+=fechaDiv,$("#gamePerson").append(html),$("[data-toggle=\"popover\"]").popover()}$("#noGame").addClass("hide"),$("#divCarregandoJogos").addClass("hide"),$("#hasGame").removeClass("hide")}divListaJogosCarregando()}function formatNumber(a){return a.toFixed(2).replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}function atualizaPontos(a,b,c,d){switch(success="text-success",danger="text-danger",warning="text-warning",up="<i class='fa fa-caret-up'></i>",down="<i class='fa fa-caret-down'></i>",same="<i class='fa fa-caret-left'></i>",popoverContent="",txtPercent="",0==d?($("#percent"+a).addClass(warning),popoverContent="Mesmo valor que concurso passado!",txtPercent=same):0>d?($("#percent"+a).addClass(danger),txtPercent=down,popoverContent=Math.abs(d)+"% Menor que o concurso passado!"):($("#percent"+a).addClass(success),txtPercent=up,popoverContent=Math.abs(d)+"% Maior que o concurso passado!"),b){case 0:$("#hit"+a).text("Ningu\xE9m acertou");break;case 1:$("#hit"+a).text(b+" Ganhador");break;default:$("#hit"+a).text(b+" Ganhadores");}try{$("#shared"+a).text("R$ "+formatNumber(c)),$("#percent"+a).text(Math.abs(d)+"% "),$("#percent"+a).append(txtPercent),$("#percent"+a)[0].dataset.content=popoverContent}catch(e){}}function montaGrafico(a,b){$("#divCarregandoGraph").addClass("hide"),$("#chart").removeClass("hide"),"use strict";var c={fontColor:"#495057",fontStyle:"bold"},d="index",e=!0,f=[],g="";for(g=$("#loto-chart"),i=0;i<b.length;i++)if(0<b.length){switch(colorPersonGame="",b[i].hits){case 15:colorPersonGame=_colorDanger15;break;case 14:colorPersonGame=_colorSuccess14;break;case 13:colorPersonGame=_colorWarning13;break;case 12:case 11:colorPersonGame=_colorInfo11_12;break;default:colorPersonGame=_colorGray;}f.push({type:"line",steppedLine:!1,data:b[i].game.split("-"),backgroundColor:colorPersonGame,borderColor:colorPersonGame,pointBorderColor:colorPersonGame,pointBackgroundColor:colorPersonGame,fill:!1,label:"Jogo #"+b[i].id})}f.push({type:"line",steppedLine:!1,data:a.split("-"),backgroundColor:_colorDanger15,borderColor:_colorDanger15,pointBorderColor:_colorDanger15,pointBackgroundColor:_colorDanger15,fill:!1,label:"Lotofacil",pointStyle:"star",pointRadius:15}),null!=_lotoChart&&_lotoChart.destroy(),_lotoChart=new Chart(g,{data:{labels:["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15"],datasets:f},options:{responsive:!0,title:{display:!0,text:String.format("{0} : {1}","Loto F\xE1cil",_objPrincipal.concurse.game),fontSize:18},maintainAspectRatio:!1,tooltips:{mode:d,intersect:e,position:"nearest"},hover:{mode:d,intersect:e},legend:{display:!0,position:"bottom"},elements:{line:{tension:0.4}},scales:{yAxes:[{gridLines:{display:!0,lineWidth:"4px",color:"rgba(0, 0, 0, .2)",zeroLineColor:"transparent"},ticks:$.extend({beginAtZero:!0,suggestedMax:25},c)}],xAxes:[{display:!0,gridLines:{display:!0},ticks:c}]}}})}String.format||(String.format=function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(c,d){return"undefined"==typeof b[d]?c:b[d]})}),jQuery("#loto-chart").attr("tabindex",-1).focus();