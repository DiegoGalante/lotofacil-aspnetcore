_objConfiguration={},_objSaveConfiguration={},_valor_antigo=0;var imported=document.createElement('script');imported.src='/static/js/utils.js',document.head.appendChild(imported),imported.src='/static/js/pages/index/pr_grafico.js',document.head.appendChild(imported),$(document).ready(function(){carregaConfiguracao()});function carregaConfiguracao(){$.ajax({type:'POST',contentType:'application/json',async:!0,url:'/loadConfiguration',success:function(a){_objConfiguration=a.configuracao,_valor_antigo=_objConfiguration.min_amount_to_send_email,$('#CalcularDezenasSemPontuacao').prop('checked',!1),$('#VerificaJogoOnline').prop('checked',!1),$('#EmailAutomatico').prop('checked',!1),$('#EmailManual').prop('checked',!1),$('#minAmountToSentEmail').val(''),!0===_objConfiguration.calculate_tens_without_success&&$('#CalcularDezenasSemPontuacao').prop('checked',!0),!0===_objConfiguration.check_game_online&&$('#VerificaJogoOnline').prop('checked',!0),!0===_objConfiguration.send_email_automatically&&$('#EmailAutomatico').prop('checked',!0),!0===_objConfiguration.send_email_manually&&$('#EmailManual').prop('checked',!0),0<_objConfiguration.min_amount_to_send_email&&(novo_valor=(+parseFloat(_objConfiguration.min_amount_to_send_email)).toFixed(2),$('#minAmountToSentEmail').val(novo_valor)),validateConfiguration()},error:function(a){console.log(a)}})}function validateConfiguration(){try{!0===_objConfiguration.check_game_online?$('#btn-checkOnline').removeClass('hide'):$('#btn-checkOnline').addClass('hide'),!0===_objConfiguration.send_email_manually?$('#btn-email').removeClass('hide'):$('#btn-email').addClass('hide')}catch(a){}}function saveConfig(a){$.ajax({type:'POST',contentType:'application/json',async:!0,url:'/saveConfiguration',data:JSON.stringify(a),success:function(b){b.result&&limpaObjetoNovaCofiguracao(),carregaConfiguracao()},error:function(b){console.log(b)}})}function limpaObjetoNovaCofiguracao(){_objSaveConfiguration.config_id=0,_objSaveConfiguration.pes_id=0,_objSaveConfiguration.valor_campo=0,_objSaveConfiguration.enum_config=0}$('#minAmountToSentEmail').keydown(function(a){2<=a.currentTarget.value.length&&0==a.currentTarget.value[0]&&(a.currentTarget.value=a.currentTarget.value.slice(1,a.currentTarget.value.length),$('#minAmountToSentEmail').val(a.currentTarget.value));-1!==$.inArray(a.keyCode,[46,8,9,27,13,110,190])||65==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||67==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||88==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||35<=a.keyCode&&39>=a.keyCode||(a.shiftKey||48>a.keyCode||57<a.keyCode)&&(96>a.keyCode||105<a.keyCode)&&a.preventDefault()}),$('#minAmountToSentEmail').blur(function(){novo_valor=(+parseFloat($('#minAmountToSentEmail').val())).toFixed(2),$('#minAmountToSentEmail').val(novo_valor),_objSaveConfiguration.config_id=_objConfiguration.id,_objSaveConfiguration.pes_id=_objConfiguration.person,_objSaveConfiguration.valor_campo=parseFloat(novo_valor),_objSaveConfiguration.valor_antigo=_valor_antigo,_objSaveConfiguration.enum_config=enumConfiguracao.ValorMinimoParaEnviarEmail,saveConfig(_objSaveConfiguration)}),$('#CalcularDezenasSemPontuacao').click(function(){_objSaveConfiguration.config_id=_objConfiguration.id,_objSaveConfiguration.pes_id=_objConfiguration.person,_objSaveConfiguration.valor_campo=$('#CalcularDezenasSemPontuacao')[0].checked,_objSaveConfiguration.enum_config=enumConfiguracao.CalcularDezenasSemPontuacao,saveConfig(_objSaveConfiguration),carregaPagina()}),$('#VerificaJogoOnline').click(function(){_objSaveConfiguration.config_id=_objConfiguration.id,_objSaveConfiguration.pes_id=_objConfiguration.person,_objSaveConfiguration.valor_campo=$('#VerificaJogoOnline')[0].checked,_objSaveConfiguration.enum_config=enumConfiguracao.VerificaJogoOnline,saveConfig(_objSaveConfiguration)}),$('#EmailAutomatico').click(function(){_objSaveConfiguration.config_id=_objConfiguration.id,_objSaveConfiguration.pes_id=_objConfiguration.person,_objSaveConfiguration.valor_campo=$('#EmailAutomatico')[0].checked,_objSaveConfiguration.enum_config=enumConfiguracao.EmailAutomatico,saveConfig(_objSaveConfiguration)}),$('#EmailManual').click(function(){_objSaveConfiguration.config_id=_objConfiguration.id,_objSaveConfiguration.pes_id=_objConfiguration.person,_objSaveConfiguration.valor_campo=$('#EmailManual')[0].checked,_objSaveConfiguration.enum_config=enumConfiguracao.EmailManual,saveConfig(_objSaveConfiguration)});